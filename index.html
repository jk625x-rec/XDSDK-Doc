<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/XDSDK-Doc/blog/rss.xml" title="XDSDK 文档中心 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/XDSDK-Doc/blog/atom.xml" title="XDSDK 文档中心 Blog Atom Feed"><title data-react-helmet="true">Unity快速开始 | XDSDK 文档中心</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Unity快速开始 | XDSDK 文档中心"><meta data-react-helmet="true" name="description" content="基于XDSDK实现简单的登录功能"><meta data-react-helmet="true" property="og:description" content="基于XDSDK实现简单的登录功能"><meta data-react-helmet="true" property="og:url" content="https://xindong.github.io/XDSDK-Doc/"><link data-react-helmet="true" rel="shortcut icon" href="/XDSDK-Doc/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://xindong.github.io/XDSDK-Doc/"><script data-react-helmet="true">document.addEventListener("DOMContentLoaded",(function(){var n=document.getElementById("base-url-issue-banner-container");if(n){var e=window.location.pathname,t="/"===e.substr(-1)?e:e+"/";n.innerHTML=t}}))</script><link rel="stylesheet" href="/XDSDK-Doc/styles.98143238.css">
<link rel="stylesheet" href="/XDSDK-Doc/main.c62259f1.css">
<link rel="preload" href="/XDSDK-Doc/styles.e34e47d4.js" as="script">
<link rel="preload" href="/XDSDK-Doc/runtime~main.259922d7.js" as="script">
<link rel="preload" href="/XDSDK-Doc/main.8ba90e18.js" as="script">
<link rel="preload" href="/XDSDK-Doc/1.8c72245a.js" as="script">
<link rel="preload" href="/XDSDK-Doc/2.bac27658.js" as="script">
<link rel="preload" href="/XDSDK-Doc/19.db119128.js" as="script">
<link rel="preload" href="/XDSDK-Doc/935f2afb.ae79e18c.js" as="script">
<link rel="preload" href="/XDSDK-Doc/17896441.91dfea92.js" as="script">
<link rel="preload" href="/XDSDK-Doc/df7c724d.5ebb24be.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="baseUrlIssueBanner_1-cE" style="border:solid red thick;background-color:#ffe6b3;margin:20px;padding:20px;font-size:20px"><p style="font-weight:bold;font-size:30px">Your Docusaurus site did not load properly.</p><p>A very common reason is a wrong site <a href="https://v2.docusaurus.io/docs/docusaurus.config.js/#baseurl" style="font-weight:bold">baseUrl configuration</a>.</p><p>Current configured baseUrl = <span style="font-weight:bold;color:red">/XDSDK-Doc/</span> </p><p>We suggest trying baseUrl = <span style="font-weight:bold;color:green" id="base-url-issue-banner-container"></span> </p></div><nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/XDSDK-Doc/"><img src="/XDSDK-Doc/img/logo.png" alt="XDSDK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/XDSDK-Doc/img/logo.png" alt="XDSDK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a><a class="navbar__item navbar__link" href="/XDSDK-Doc/">XDSDK</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xindong/XDSDK-Doc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/XDSDK-Doc/"><img src="/XDSDK-Doc/img/logo.png" alt="XDSDK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/XDSDK-Doc/img/logo.png" alt="XDSDK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/XDSDK-Doc/">XDSDK</a></li><li class="menu__list-item"><a href="https://github.com/xindong/XDSDK-Doc" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">接入文档</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/XDSDK-Doc/">Unity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/XDSDK-Doc/android">Android</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/XDSDK-Doc/ios">iOS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">功能介绍</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/fun-db">收据收集2.x</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/tap-fun-db">数据收集 3.x</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/tap-moment">动态 2.x</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/tap-fun-moment">动态 3.x</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/fun-service">服务端</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/XDSDK-Doc/xd-faq">常见问题</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Unity快速开始</h1></header><div class="markdown"><p>基于XDSDK实现简单的登录功能</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="导包"></a>导包<a class="hash-link" href="#导包" title="Direct link to heading">#</a></h2><p><strong>已接入旧版 SDK 的游戏需要先删除旧版 SDK 的所有文件，具体文件列表参考 <a href="/XDSDK-Doc/旧版SDK文件列表.md">旧版SDK文件列表</a></strong>  </p><p> 新版 XDSDK 使用 UPM 方式导入 SDK 资源，配置方式有两种，选择一种即可，如下所示：</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-修改对应配置文件"></a>1 修改对应配置文件<a class="hash-link" href="#1-修改对应配置文件" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//在YourProjectPath/Packages/manifest.json中添加以下代码</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;com.xd.sdk&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://github.com/xindong/XDSDK_UPM.git#3.0.0&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;com.tds.sdk&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://github.com/xindong/TAPSDK_UPM.git#1.0.7&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-通过-unity-packagemanager-导入"></a>2 通过 Unity PackageManager 导入<a class="hash-link" href="#2-通过-unity-packagemanager-导入" title="Direct link to heading">#</a></h3><ol><li>下载XDSDK的 <strong><a href="https://git.gametaptap.com/tds-public/xd-sdk-4/-/tree/master/sdk/unity" target="_blank" rel="noopener noreferrer">Unity3D工具类文件</a></strong>， 双击或拖拽 XDSDK_V(版本号)_unity.unitypackage 文件到 Plugins 目录下导入相关文件。注意，该操作可能会覆盖你项目原来已经存在的文件。</li><li>全部选择，点击 “import” 按钮。   </li><li>导入后，将 Plugins/script 下的 XDSDKListener.cs 脚本文件拖动到长生命周期的对象中（比如 MainCamera）进行挂接。  </li></ol><p><img src="https://qnblog.ijemy.com/WX20201125-093759.png" alt="unitypackage import">  </p><p><strong>至此，你已经将XDSDK导入进自己的项目工程中了</strong>   </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="xdsdk快速集成-登录功能"></a>xdsdk快速集成-登录功能<a class="hash-link" href="#xdsdk快速集成-登录功能" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1、引入命名空间"></a>1、引入命名空间<a class="hash-link" href="#1、引入命名空间" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码"></a>示例代码<a class="hash-link" href="#示例代码" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">using xdsdk;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2、设置回调"></a>2、设置回调<a class="hash-link" href="#2、设置回调" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="api"></a>API<a class="hash-link" href="#api" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void SetCallback(XDCallback callback)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-1"></a>示例代码<a class="hash-link" href="#示例代码-1" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">//XDSDKCallback需要实现XDCallback接口的所有方法</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.SetCallback(new XDSDKCallback());</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3、初始化xdsdk"></a>3、初始化XDSDK<a class="hash-link" href="#3、初始化xdsdk" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="api-1"></a>API<a class="hash-link" href="#api-1" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param client_id 心动client_id</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param aOrientation 屏幕方向，0表示横屏，1表示竖屏</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param channel 渠道号</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param version 版本号</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param enableTapDB 是否开启TapDB</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void InitSDK(string client_id,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                           int aOrientation,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                           string channel,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                           string version,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                           bool enableTapdb)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-2"></a>示例代码<a class="hash-link" href="#示例代码-2" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.InitSDK(&quot;xxxxxx&quot;, 1,&quot;xx&quot;,&quot;xx&quot;,true);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4、登录"></a>4、登录<a class="hash-link" href="#4、登录" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="api-2"></a>API<a class="hash-link" href="#api-2" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void TapTapLogin()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-3"></a>示例代码<a class="hash-link" href="#示例代码-3" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.TapTapLogin();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-注意事项"></a>5. 注意事项<a class="hash-link" href="#5-注意事项" title="Direct link to heading">#</a></h3><ul><li>XDCallback方法需要全部被实现，建议直接拷贝官方Demo工程中的 <a href="https://github.com/JemyCheung/xdsdk_unity/blob/master/Assets/scripts/XDSDKCallback.cs" target="_blank" rel="noopener noreferrer">XDSDKCallback.cs</a> 脚本中的方法，否则可能会报错</li><li>XDSDK的初始化方法initSDK()的第一个参数 client_id 确认是从开发者后台正确获取的  </li><li>注意XDSDKListener.cs脚本的挂载</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6-android-导出apk"></a>6. Android-导出APK<a class="hash-link" href="#6-android-导出apk" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="android-11-的适配"></a>Android 11 的适配<a class="hash-link" href="#android-11-的适配" title="Direct link to heading">#</a></h4><p>如果游戏打包设置的 targetSdkVersion &lt; 30 , 暂不需要配置，可跳过此步。
如果设置的 targetSdkVersion &gt;= 30 , 则需按如下步骤进行配置：</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-配置-androidmanifestxml-文件"></a>1. 配置 AndroidManifest.xml 文件<a class="hash-link" href="#1-配置-androidmanifestxml-文件" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-xml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!--在 AndroidManifest.xml 中添加如下内容：--&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">manifest</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">...</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">queries</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.tencent.mm</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.tencent.mobileqq</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.taptap</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.taptap.pad</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.taptap.global</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">queries</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- 如果游戏需要游客登录或访问非游戏的其他目录文件，则需添加如下权限 --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">!--</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">&lt;uses-permission</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">android.permission.MANAGE_EXTERNAL_STORAGE</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">manifest</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-unity配置修改"></a>2. unity配置修改<a class="hash-link" href="#2-unity配置修改" title="Direct link to heading">#</a></h4><p>根据不同 Unity 版本修改对应编译配置，具体可参考Unity <a href="https://developers.google.com/ar/develop/unity/android-11-build" target="_blank" rel="noopener noreferrer">适配 Android 11</a><br>
如果当前版本小于 2019.3.patch 7, 当编译提示 launcher 与 main library 的 gradle 版本不一致错误信息时，需要将 SDK 目录中的 Android 附加 / Android 11适配目录中、将launcherTemplate.gradle 文件拷贝到项目 Assets / plugins / Android 目录中、将GradleTemplateFixer.cs 文件拷贝到 Assets / Editor 目录中。在编译前需选择Unity菜单 Tools -&gt; Build -&gt; Gradle Template Fix (Preprocess build）。如果游戏除当前项目外还需要编译其他项目，在编译完成后还需选择 Tools -&gt; Build -&gt; Gradle Template Fix (Postprocess build），否则不需要其他操作。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="导出apk"></a>导出apk<a class="hash-link" href="#导出apk" title="Direct link to heading">#</a></h4><span style="color:#f00;padding:0.2rem">* 请确保签名文件和包名是在开发者中心正确配置过的，client_id从开发者中心获取</span><p>按下面步骤即可成功打包安装</p><p><img src="https://qnblog.ijemy.com/xd_android_releaseapk.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7-ios-打包xcode"></a>7. iOS-打包Xcode<a class="hash-link" href="#7-ios-打包xcode" title="Direct link to heading">#</a></h3><p><strong>请注意带<span style="color:#f00;padding:0.2rem">*</span>都为必配项</strong></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-导出xcode"></a>1. 导出xcode<span style="color:#f00;padding:0.2rem">*</span><a class="hash-link" href="#1-导出xcode" title="Direct link to heading">#</a></h4><p>Platform 切换至 iOS 平台 --&gt; 点击 “Player Settings” --&gt; 设置 Bundle Identifier --&gt; 点击 “Build“ 按钮。如下图步骤所示。</p><p><img src="https://qnblog.ijemy.com/xd-unity-ios-00.png">
请确保bundleid与开发者中心配置的bundleid保持一致</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-导入资源文件"></a>2. 导入资源文件<span style="color:#f00;padding:0.2rem">*</span><a class="hash-link" href="#2-导入资源文件" title="Direct link to heading">#</a></h4><p>下载的XDSDK文件中包含有 “iOS附加” 目录，该目录中有 XDSDKResouse.bundle 文件，将该文件拷贝至由Unity导出的Xcode项目的根目录中，该文件的主要用途如下。</p><table><thead><tr><th>目录或文件</th><th>用途</th></tr></thead><tbody><tr><td>XDSDKResource.bundle</td><td>XDSDK需要或依赖的资源文件，需要保证所有文件都被添加到了Xcode的“Copy Bundle Resources”中</td></tr></tbody></table><p><img src="https://qnblog.ijemy.com/xd-unity-ios-01.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3-添加系统依赖库"></a>3. 添加系统依赖库<span style="color:#f00;padding:0.2rem">*</span><a class="hash-link" href="#3-添加系统依赖库" title="Direct link to heading">#</a></h4><p><strong>请核对下列库文件是否已自动添加，如果未自动添加则需要手动添加</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">libz.tbd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">libsqlite3.0.tbd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">libicucore.tbd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Security.framework</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">CFNetwork.framework</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">UIKit.framework</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">QuartzCore.framework</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Foundation.framework</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">CoreGraphics.Framework</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">CoreTelephony.framework</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">SystemConfiguration.framework</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">libiconv.tbd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">libc++.tbd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">AuthenticationServices.framework</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><img src="https://qnblog.ijemy.com/xd-unity-ios-02.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4-配置-infoplist"></a>4. 配置 info.plist<a class="hash-link" href="#4-配置-infoplist" title="Direct link to heading">#</a></h4><p>修改项目的info.plist，在dict节点中添加下列内容。修改的内容主要为了保证QQ和微信登录能够正常运行。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-xml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">key</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">LSApplicationQueriesSchemes</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">key</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">array</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">tapsdk</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqq</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqqapi</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">wtloginmqq2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqqopensdkapiV4</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqqopensdkapiV3</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqqopensdkapiV2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqqwpa</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqqOpensdkSSoLogin</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqqgamebindinggroup</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqqopensdkfriend</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mqzone</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">weixin</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">wechat</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    // 2.1.0</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">weixinULAPI</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">string</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">array</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">key</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">NSAppTransportSecurity</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">key</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dict</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">key</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">NSAllowsArbitraryLoads</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">key</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">true</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dict</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-配置工程capability"></a>5. 配置工程capability<span style="color:#f00;padding:0.2rem">*</span><a class="hash-link" href="#5-配置工程capability" title="Direct link to heading">#</a></h4><ol><li><p>需要在xcode工程中添加capability： Sign in with apple  </p><span style="color:#f00;padding:0.2rem">由于苹果审核要求，iOS13 显示第三方登录的同时必须显示苹果登录(建议位置靠前)</span></li><li><p>(非必须)在xcode工程中添加capability：Associated Domains
Associated Domains添加一项，格式为『applinks + 域名』如「applinks:<a href="http://www.xd.com%E3%80%8D%E3%80%82" target="_blank" rel="noopener noreferrer">www.xd.com」。</a>
域名为游戏官网地址，请联系平台方确认</p></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6-处理第三方应用跳转"></a>6. 处理第三方应用跳转<a class="hash-link" href="#6-处理第三方应用跳转" title="Direct link to heading">#</a></h4><p>不配置的情况下会打开webview进行登录</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="61-跳转"></a>6.1. 跳转<a class="hash-link" href="#61-跳转" title="Direct link to heading">#</a></h5><p>需要在Xcode中设置多个URL Types，URL Types主要是需要设置URL Schemes，其它选项可任意填写。按照下面表格的内容填写，注意替换其中的各项AppID。</p><table><thead><tr><th>URL Schemes</th><th>用途</th><th>示例</th><th>备注</th></tr></thead><tbody><tr><td>XD-{心动client_id}</td><td>用于支付宝支付后跳回</td><td>XD-ci2dos1ktzsca4f</td><td></td></tr><tr><td>{微信AppID}</td><td>用于微信授权登录后跳回</td><td>wx19f231d77ac408d9</td><td></td></tr><tr><td>tencent{QQ AppID}</td><td>用于QQ授权登录后跳回</td><td>tencent317081</td><td>如果给到的心动AppID没有对应的QQ AppID，可以不配置该项</td></tr><tr><td>tt{TapTap client_id}</td><td>用户TapTap授权登录后跳回</td><td>tt123456</td><td></td></tr></tbody></table><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="62-跳回"></a>6.2. 跳回<a class="hash-link" href="#62-跳回" title="Direct link to heading">#</a></h5><p>在UnityAppController.mm中增加如下两个方法，如果已经存在这些方法，在其中追加相应的处理代码即可。请务必添加下列代码，否则将影响第三方登录的授权回调。</p><p>SDK 2.1.0 新增universalLink处理</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token macro property">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token macro property"> &lt;XdComPlatform/XDCore.h&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token operator">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">application</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">UIApplication</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">application openURL</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">NSURL</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">url sourceApplication</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">NSString</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">sourceApplication annotation</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">annotation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">XDCore HandleXDOpenURL</span><span class="token operator">:</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">application</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">UIApplication </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">app openURL</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">NSURL </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">url options</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">NSDictionary</span><span class="token operator">&lt;</span><span class="token plain">UIApplicationOpenURLOptionsKey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> id</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">XDCore HandleXDOpenURL</span><span class="token operator">:</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">application</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">UIApplication </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">application continueUserActivity</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">NSUserActivity </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">userActivity restorationHandler</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">^</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">NSArray</span><span class="token operator">&lt;</span><span class="token plain">id</span><span class="token operator">&lt;</span><span class="token plain">UIUserActivityRestoring</span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> _Nullable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">restorationHandler </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">XDCore handleOpenUniversalLink</span><span class="token operator">:</span><span class="token plain">userActivity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="8-buid-settings"></a>8. Buid Settings<span style="color:#f00;padding:0.2rem">*</span><a class="hash-link" href="#8-buid-settings" title="Direct link to heading">#</a></h3><p><strong>注意：如果新版本Untiy导出后有多个Target，只需在主target配置即可。</strong></p><p><strong>Enable Bitcode = NO</strong></p><p><strong>在编译选项‘Other Linker Flags’中加入「-ObjC」和 「-all_load」。</strong></p><p><strong>Swift Language Version 设置为 Swift 5.0</strong></p><p><strong>BuildSetting中，Always Embed Swift Standard Libraries设置为YES</strong></p><p><strong>BuildSetting中，Runpath Search Paths 确保添加 @executable_path/Frameworks</strong></p><p><strong>如果新版本Untiy导出后有多个Target，只需在主target配置即可。</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="登录功能介绍"></a>登录功能介绍<a class="hash-link" href="#登录功能介绍" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1登录"></a>1.登录<a class="hash-link" href="#1登录" title="Direct link to heading">#</a></h3><ul><li><p>XDSDK 2.3.0开始，支持游戏自定义登录入口。入口素材联系平台提供。<span style="color:#f00;padding:0.2rem">原默认登录方式不再推荐</span></p></li><li><p>游戏自行绘制登录按钮，分别触发下面的登录事件</p></li><li><p>登录前需设置回调并完成初始化，回调设置请<a href="https://github.com/JemyCheung/xdsdk_unity/blob/master/Assets/scripts/XDSDKCallback.cs" target="_blank" rel="noopener noreferrer">参考demo</a></p></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// 自动登录（若有上次登录记录，则会直接登录）</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static bool AutoLogin()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// TapTap登录</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void TapTapLogin()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// 苹果登录</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void AppleLogin()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// 游客登录</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void GuestLogin()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><em><span style="color:#f00;padding:0.2rem">由于苹果审核要求，iOS13+ 显示第三方登录的同时必须显示苹果登录(建议位置靠前) </span></em>  </p><p><em><span style="color:#f00;padding:0.2rem">获取、查看用户信息以及支付接口请在获取到登录成功回调之后调用。</span></em></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="登录状态回调"></a>登录状态回调<a class="hash-link" href="#登录状态回调" title="Direct link to heading">#</a></h4><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>登录成功</td><td>void OnLoginSucceed(string token)</td></tr><tr><td>登录失败</td><td>void OnLoginFailed(string msg)</td></tr><tr><td>登录取消</td><td>void OnLoginCanceled()</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2设置角色"></a>2.设置角色<a class="hash-link" href="#2设置角色" title="Direct link to heading">#</a></h3><p>角色登录成功之后，设置当前角色信息；角色登出后，清空当前角色信息</p><p><strong><span style="color:#f00;padding:0.2rem">XDSDK 4.2.0之后，新版用户中心显示角色信息，需要额外调用接口设置角色信息</span></strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void SetRole(string roleId,string roleName,string roleAvatar)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void ClearRole()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3获取access-token"></a>3.获取Access Token<a class="hash-link" href="#3获取access-token" title="Direct link to heading">#</a></h3><p>调用该接口获取当前登录用户的access token。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static string GetAccessToken()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-4"></a>示例代码<a class="hash-link" href="#示例代码-4" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.GetAccessToken()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4获取当前登录状态"></a>4.获取当前登录状态<a class="hash-link" href="#4获取当前登录状态" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static bool IsLoggedIn()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-5"></a>示例代码<a class="hash-link" href="#示例代码-5" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.IsLoggedIn()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5游客升级"></a>5.游客升级<a class="hash-link" href="#5游客升级" title="Direct link to heading">#</a></h3><p>当游客账号升级成功时,会触发下列回调。<br>
后续如需使用token，务必使用回调给的新token。但已生效的会话无需处理。</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>游客升级成功</td><td>public void OnGuestBindSucceed(string token)</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6游客绑定"></a>6.游客绑定<a class="hash-link" href="#6游客绑定" title="Direct link to heading">#</a></h3><p>调用该方法时，弹出游客绑定窗口。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public void OpenUserBindView()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-6"></a>示例代码<a class="hash-link" href="#示例代码-6" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.OpenUserBindView();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>成功</td><td>public void OnGuestBindSucceed (string token)</td></tr><tr><td>失败</td><td>public void OnGuestBindFailed(string msg)</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7登出"></a>7.登出<a class="hash-link" href="#7登出" title="Direct link to heading">#</a></h3><p>需要注销当前登录用户时调用，该操作不会出现登录界面。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void Logout()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>登出成功</td><td>public void OnLogoutSucceed()</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-7"></a>示例代码<a class="hash-link" href="#示例代码-7" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.Logout();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="8退出"></a>8.退出<a class="hash-link" href="#8退出" title="Direct link to heading">#</a></h3><p>调用该方法时，弹出确认框供用户选择是否退出。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void Exit()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-8"></a>示例代码<a class="hash-link" href="#示例代码-8" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.Exit();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>确认退出</td><td>public void OnExitConfirm()</td></tr><tr><td>取消退出</td><td>public void OnExitCancel()</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="用户相关功能介绍"></a>用户相关功能介绍<a class="hash-link" href="#用户相关功能介绍" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-打开用户中心"></a>1. 打开用户中心<a class="hash-link" href="#1-打开用户中心" title="Direct link to heading">#</a></h3><p>调用该接口打开用户中心界面，用户可以在该界面进行登出和登录操作，游戏注意正确处理回调。在未登录状态，无法打开用户中心。在用户中心中，用户可进行登出操作，此时交互界面将消失。游戏需要提供引导用户重新进行登录的操作界面。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">* @return false表示尚未登录，重复调用默认为成功</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static bool OpenUserCenter()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-9"></a>示例代码<a class="hash-link" href="#示例代码-9" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.OpenUserCenter()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-微信分享"></a>2. 微信分享<a class="hash-link" href="#2-微信分享" title="Direct link to heading">#</a></h3><p><strong><span style="color:#f00;padding:0.2rem">微信分享功能即将停止维护，建议单独接入</span></strong></p><p>调用心动SDK的微信分享功能。</p><p>参数说明</p><table><thead><tr><th>通用参数</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>text</td><td>否</td><td>string</td><td>分享文字内容</td></tr><tr><td>bText</td><td>是</td><td>string</td><td>分享内容是否为多媒体内容（1文本内容，0多媒体内容）</td></tr><tr><td>scene</td><td>是</td><td>string</td><td>分享场景（SESSION对话，TIMELINE朋友圈，FAVOURITE收藏）</td></tr><tr><td>shareType</td><td>是</td><td>string</td><td>分享类型（TEXT，IMAGE，MUSIC，VIDEO，WEB）</td></tr><tr><td>title</td><td>否</td><td>string</td><td>分享标题</td></tr><tr><td>description</td><td>否</td><td>string</td><td>分享描述信息</td></tr><tr><td>thumbPath</td><td>否</td><td>string</td><td>缩略图路径 （安卓不支持Url，请填写文件路径。）</td></tr><tr><td>meidaTagName</td><td>否</td><td>string</td><td></td></tr><tr><td>messageExt</td><td>否</td><td>string</td><td></td></tr><tr><td>messageAction</td><td>否</td><td>string</td><td></td></tr></tbody></table><p>以下参数，请根据不同的分享类型（shareType参数）进行设置</p><table><thead><tr><th>图片分享</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>imageUrl</td><td>是</td><td>string</td><td>分享图片Url （安卓不支持Url，请填写文件路径）</td></tr></tbody></table><table><thead><tr><th>音乐分享</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>musicUrl</td><td>是</td><td>string</td><td>音乐链接 （请填写音乐路径。例：<a href="https://www.xd.com/music.mp3%EF%BC%89" target="_blank" rel="noopener noreferrer">https://www.xd.com/music.mp3）</a></td></tr><tr><td>musicLowBandUrl</td><td>否</td><td>string</td><td>低带宽音乐链接</td></tr><tr><td>musicDataUrl</td><td>否</td><td>string</td><td>音乐数据链接</td></tr><tr><td>musicLowBandDataUrl</td><td>否</td><td>string</td><td>低带宽状音乐数据链接</td></tr></tbody></table><table><thead><tr><th>视频分享</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>videoUrl</td><td>是</td><td>string</td><td>视频链接</td></tr><tr><td>videoLowBandUrl</td><td>否</td><td>string</td><td>低带宽视频链接</td></tr></tbody></table><table><thead><tr><th>网页分享参数</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>webpageUrl</td><td>是</td><td>string</td><td>网页链接</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-10"></a>示例代码<a class="hash-link" href="#示例代码-10" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">//分享文字</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;);  //标题</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;); //描述</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;text&quot;, &quot;***text***&quot;); //内容</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;); //scene场景值</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;TEXT&quot;);  //分享类型 文字</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//分享图片</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;);  //标题</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;);  //描述</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;thumbPath&quot;, &quot;/storage/emulated/0/2.png&quot;); //预览图路径</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;imageUrl&quot;, &quot;/storage/emulated/0/2.png&quot;); //图片路径</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;); //scene场景值</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;IMAGE&quot;);  //分享类型 图片</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//分享音乐</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;); //标题</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;); //描述</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;thumbPath&quot;, &quot;/storage/emulated/0/2.png&quot;); //预览图路径</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;musicUrl&quot;, &quot;http://staff2.ustc.edu.cn/~wdw/softdown/index.asp/0042515_05.ANDY.mp3&quot;);  //音乐url</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;);  //scene场景值</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;MUSIC&quot;);  //分享类型 音乐</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//分享视频</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;); //标题</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;); //描述</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;thumbPath&quot;, &quot;/storage/emulated/0/2.png&quot;); //预览图路径</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;videoUrl&quot;, &quot;https://www.xd.com&quot;);  //视频url</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;);  //scene场景值</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;VIDEO&quot;);  //分享类型 视频</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//分享网页</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;); //标题</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;); //描述</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;thumbPath&quot;, &quot;/storage/emulated/0/2.png&quot;); //预览图路径</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;webpageUrl&quot;, &quot;https://www.xd.com&quot;);  //视频url</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;);  //scene场景值</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;WEB&quot;);  //分享类型 网页</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用分享接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>分享成功</td><td>public void OnWXShareSucceed()</td></tr><tr><td>分享失败</td><td>public void OnWXShareFailed(string msg)</td></tr></tbody></table><span style="color:#f00;padding:0.2rem">注意：分享过程中，若用户选择留在微信，则不会产生分享回调。游戏不应当完全依赖分享回调。</span><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3实名认证"></a>3.实名认证<a class="hash-link" href="#3实名认证" title="Direct link to heading">#</a></h3><p>调用该方法时，弹出实名认证窗口。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void OpenRealName()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-11"></a>示例代码<a class="hash-link" href="#示例代码-11" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.OpenRealName();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>确认退出</td><td>public void OnRealNameSucceed()</td></tr><tr><td>取消退出</td><td>public void OnRealNameFailed(string error_msg)</td></tr></tbody></table><span style="color:#f00;padding:0.2rem">注意：实名认证结果以服务端authoriz_state参数为准（见4.1）。</span><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4客服"></a>4.客服<a class="hash-link" href="#4客服" title="Direct link to heading">#</a></h3><p>调用该方法时，弹出客服窗口。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void UserFeedback()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-12"></a>示例代码<a class="hash-link" href="#示例代码-12" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.UserFeedback();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5防沉迷"></a>5.防沉迷<a class="hash-link" href="#5防沉迷" title="Direct link to heading">#</a></h3><p>unity 2.3.0版本优化防沉迷，支持单机游戏和联网游戏。</p><p><strong>
下面两种使用方式的区别：<br>第二个是游戏前后台时调用，记录游戏时长，固定的。<br>第一个应用场景是，玩家正在打比赛/游戏中，时间快到了。可以调个GameStop，停止计时。
</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">//停止计时和恢复计时</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void GameStop();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void GameResume ();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Android 防沉迷依赖于 XDSDK.OnResume 和 XDSDK.OnStop 接口，所以游戏应确保这两个接口接入正常，在 unity 中接入示例：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">//游戏前后台时固定调用，记录游戏时常</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">void OnApplicationPause(bool pauseStatus)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        if (pauseStatus)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            xdsdk.XDSDK.OnStop();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        else</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            xdsdk.XDSDK.OnResume();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6打开协议页面"></a>6.打开协议页面<a class="hash-link" href="#6打开协议页面" title="Direct link to heading">#</a></h3><p>游戏需要打开协议的内容时，可以调用该接口，示例如下：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">xdsdk.XDSDK.OpenProtocol(xdsdk.XDSDK.ProtocolType.PROTOCOL_TYPE_GAME);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>参数为协议类型，包括  PROTOCOL_TYPE_USER(用户协议),PROTOCOL_TYPE_GAME(游戏协议),PROTOCOL_TYPE_PRIVACY(隐私协议)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7taptap论坛"></a>7.TapTap论坛<a class="hash-link" href="#7taptap论坛" title="Direct link to heading">#</a></h3><p>导入<code>namespace com.taptap.sdk</code></p><p>打开论坛</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">appid 游戏论坛ID，与TapTap开发者ID不同</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public void OpenTapTapForum(string appid)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>示例</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">TapTapSDK.Instance.OpenTapTapForum(&quot;123&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="android配置"></a>Android配置<a class="hash-link" href="#android配置" title="Direct link to heading">#</a></h4><ol><li><p>确认 /app/manifest/AndroidManifest.xml 文件。</p></li><li><p>将 uses-permission 元素添加到清单文件中：</p></li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol start="3"><li>添加 Activity元素到清单文件中:</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token operator">&lt;</span><span class="token plain">activity android</span><span class="token operator">:</span><span class="token plain">name</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;com.taptap.sdk.TapTapActivity&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    android</span><span class="token operator">:</span><span class="token plain">exported</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;false&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    android</span><span class="token operator">:</span><span class="token plain">configChanges</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;keyboard|keyboardHidden|screenLayout|screenSize|orientation&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    android</span><span class="token operator">:</span><span class="token plain">screenOrientation</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sensorLandscape&quot;</span><span class="token comment" style="color:rgb(98, 114, 164)">//请保持和游戏屏幕方向相同</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    android</span><span class="token operator">:</span><span class="token plain">theme</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;@android:style/Theme.NoTitleBar&quot;</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">activity</span><span class="token operator">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios配置"></a>iOS配置<a class="hash-link" href="#ios配置" title="Direct link to heading">#</a></h4><p>打开infog.plist，添加授权文案</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;key&gt;NSPhotoLibraryUsageDescription&lt;/key&gt;   </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;string&gt;XXXX需要您的同意,才能访问相册&lt;/string&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;   </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;string&gt;XXXX需要您的同意,才能访问相机&lt;/string&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;dict&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;true/&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/dict&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="8xdlive直播"></a>8.XDLive直播<a class="hash-link" href="#8xdlive直播" title="Direct link to heading">#</a></h3><p>XDSDK中包含了游戏直播相关组件。</p><p>开通步骤：</p><p>1.联系XDSDK相关人员开通，获取appid和授权直播源管理后台。</p><p>2.接口</p><p>打开论坛</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// appid: 申请到的appid</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public void OpenXDLive(string appid);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// appid: 申请到的appid</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//   uri: 自定义地址</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public void OpenXDLive(string appid,string uri);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//       appid: 申请到的appid</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//         uri: 自定义地址</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// orientation: 指定屏幕方向（支持竖屏游戏强制设置横屏）</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public void OpenXDLive(string appid,string uri,int orientation);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>示例：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">com.xdsdk.xdlive.XDLive.Instance.OpenXDLive(&quot;123&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>设置直播相关事件回调：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public void SetCallback(XDLiveCallback callback)；</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>回调方法：
cs</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// 直播打开</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public override void OnXDLiveOpen();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// 直播关闭</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public override void OnXDLiveClosed();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="9-地区判断"></a>9. 地区判断<a class="hash-link" href="#9-地区判断" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">using TDSCommon;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">TDSCommon.TDSCommon.GetRegionCode((isMainland)=&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    //true 大陆 false 非大陆</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">});</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="内购"></a>内购<a class="hash-link" href="#内购" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-流程图"></a>1. 流程图<a class="hash-link" href="#1-流程图" title="Direct link to heading">#</a></h3><p><img src="https://qnblog.ijemy.com/xd_pay.png" alt="image"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-发起支付"></a>2. 发起支付<a class="hash-link" href="#2-发起支付" title="Direct link to heading">#</a></h3><span style="color:#f00;padding:0.2rem">不保证在任何情况下都能收到回调，请勿直接使用SDK返回的支付结果作为最终判定订单状态的依据。 为了收到支付回调，需要在应用启动后就设置好支付相关功能。</span><p>调用该接口发起支付。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">* @param info 支付相关信息，注意key和value都是字符串类型</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static bool Pay(Dictionary&lt;string, string&gt; info)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-13"></a>示例代码<a class="hash-link" href="#示例代码-13" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">Dictionary&lt;string, string&gt; info = new Dictionary&lt;string,string&gt;();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.Add(&quot;OrderId&quot;, &quot;1234567890123456789012345678901234567890&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.Add(&quot;Product_Price&quot;, &quot;1&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.Add(&quot;EXT&quot;, &quot;abcd|efgh|1234|5678&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.Add(&quot;Sid&quot;, &quot;2&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.Add(&quot;Role_Id&quot;, &quot;3&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.Add(&quot;Product_Id&quot;, &quot;4&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.Add(&quot;Product_Name&quot;, &quot;648大礼包&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.Add(&quot;EXT&quot;, &quot;{\&quot;payCallbackCode\&quot;:2}&quot;);（）</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.Pay (info);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>其中info的字段如下。</p><table><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>Product_Name</td><td>是</td><td>商品名称，建议以游戏名称开头，方便财务对账</td></tr><tr><td>Product_Id</td><td>是</td><td>商品ID</td></tr><tr><td>Product_Price</td><td>是</td><td>商品价格（单位分）</td></tr><tr><td>Sid</td><td>是</td><td>所在服务器ID，不能有特殊字符，服务端支付回调会包含该字段</td></tr><tr><td>Role_Id</td><td>是</td><td>支付角色ID，服务端支付回调会包含该字段</td></tr><tr><td>OrderId</td><td>否</td><td>游戏侧订单号，服务端支付回调会包含该字段</td></tr><tr><td>EXT</td><td>否</td><td>额外信息，最长512个字符，服务端支付回调会包含该字段。可用于标记区分充值回调地址，如需使用该功能，请联系平台进行配置。#### 示例代码：info.Add(&quot;EXT&quot;, &quot;{\&quot;payCallbackCode\&quot;:2}&quot;);</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3-恢复支付"></a>3. 恢复支付<a class="hash-link" href="#3-恢复支付" title="Direct link to heading">#</a></h3><span style="color:#f00;padding:0.2rem">恢复支付逻辑，SDK 4.0.1(iOS)之后添加。</span><p>优化前：</p><p>在玩家第一笔掉单时，SDK 一直处于等待接收收据的状态，此时，
用户一直在游戏中，苹果随时可能发送收据给 SDK，一旦发送，SDK 就会通知游戏发送道具；
用户关闭游戏（杀进程或退后台），此时 SDK 不再接收苹果收据。导致即使这期间如果苹果有发送收据来，SDK 也收不到。除非玩家第二次充值，苹果会连同上一笔未完成订单一次性发送，造成玩家同时收到两笔道具的情况。</p><p>优化后：</p><p>当玩家再次打开游戏，SDK 再次向苹果请求一次收据信息。如有掉单的收据，且玩家登录成功后，则通知游戏，游戏来收到通知后来决定是否要补发道具。</p><span style="color:#f00;padding:0.2rem">游戏内购流程图：</span><span style="color:#f00;padding:0.2rem">注意: 如果有遗留未完成订单，在接收到恢复订单回调后，(若单个用户可能拥有多个账号，可以请求用户确认后）调用恢复订单接口。</span><p>说明：</p><p>在掉单的情况下，SDK只能获取订单的基本信息，如商品ID、苹果侧订单ID（非游戏生成order_id）和商品数量，不能直接对应到用户，所以无法直接兑换商品。</p><p>游戏在收到掉单回调之后，可以弹窗请用户确认是否需要恢复商品，如需要，则用回调提供的已有参数，加上其他需要的参数，如角色ID，服务器ID等，使用恢复订单接口恢复该商品。</p><span style="color:#f00;padding:0.2rem">SDK会提供测试包，供游戏使用沙盒测试（购买之后会造成掉单），游戏调用恢复接口如果成功到账则为测试成功。</span><p>游戏内弹窗示例(文案做相应修改)：</p><p>回调方法</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/// 有未完成的订单回调，比如：礼包码.注意：多个未完成订单会在一个数组中一起回调。（只会在登录状态下回调）</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">/// @param resultList 订单信息List。</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">/// 单个未完成订单信息包含：     TransactionIdentifier ：订单标识 ，恢复购买时需要回传</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">///                                    Product_Id ：商品ID，</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">///                                        Quantity：商品数量</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public override void RestoredPayment(List&lt;Dictionary&lt;string,string&gt;&gt; resultList){</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4-恢复订单"></a>4. 恢复订单<a class="hash-link" href="#4-恢复订单" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cs codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">* @param info 支付相关信息，注意key和value都是字符串类型</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static bool RestorePay(Dictionary&lt;string, string&gt; info)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>其中info的字段如下。</p><table><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>TransactionIdentifier</td><td>是</td><td>需要恢复的订单标识，SDK恢复订单回调中包含</td></tr><tr><td>Product_Name</td><td>是</td><td>商品名称，建议以游戏名称开头，方便财务对账</td></tr><tr><td>Product_Id</td><td>是</td><td>商品ID，到AppStore购买的商品</td></tr><tr><td>Product_Price</td><td>是</td><td>商品价格（单位分），对于AppStore支付，该字段没有用处，但是需要传递真实金额，有多处需要用到</td></tr><tr><td>Sid</td><td>是</td><td>所在服务器ID，不能有特殊字符，服务端支付回调会包含该字段</td></tr><tr><td>Role_Id</td><td>是</td><td>支付角色ID，服务端支付回调会包含该字段</td></tr><tr><td>OrderId</td><td>否</td><td>游戏侧订单号，服务端支付回调会包含该字段</td></tr><tr><td>EXT</td><td>否</td><td>额外信息，最长512个字符，服务端支付回调会包含该字段。可用于标记区分充值回调地址，如需使用该功能，请联系平台进行配置。#### 示例代码：[prdInfo setObject:@&quot;{\&quot;payCallbackCode\&quot;:1}&quot; forKey:@&quot;EXT&quot;];</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-支付结果"></a>5. 支付结果<a class="hash-link" href="#5-支付结果" title="Direct link to heading">#</a></h3><p>调用发起支付和恢复支付接口会触发下列回调。</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>支付完成</td><td>public void OnPayCompleted()</td></tr><tr><td>支付失败</td><td>public void OnPayFailed(string msg)</td></tr><tr><td>支付取消</td><td>public void OnPayCanceled()</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="广告"></a>广告<a class="hash-link" href="#广告" title="Direct link to heading">#</a></h2><p>XDSDK内部集成了部分主要渠道广告SDK，包括今日头条巨量广告平台SDK，和腾讯广点通SDK。必要事件（如注册）会在SDK内部发送，充值事件由XDSDK服务端发送事件到相应平台。游戏不用做额外对接工作。</p><p>需要接入相应平台的SDK请联系XDSDK后端配置广告参数。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-ios"></a>1. iOS<a class="hash-link" href="#1-ios" title="Direct link to heading">#</a></h3><p>今日头条：TTTracker.framework，版本2.0.6</p><p>广点通：GDTActionSDK.framework，版本1.4.9</p><p>游戏打包时加入对应的SDK即可。</p><p>注意：</p><p>1.广点通SDK在添加到Link Binary With Libraries之后，还必须添加到Embedded Contend中。</p><p>2.build setting 中Other Link Flag 中添加-ObjC。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-android"></a>2. Android<a class="hash-link" href="#2-android" title="Direct link to heading">#</a></h3><p>今日头条：版本2.0.6</p><p>广点通：版本1.4.9</p><p>需要使用广告包时，将XDAdAction.aar加入工程。并添加新权限</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>若需要出多个渠道包，由市场联系XDSDK，提供所需文件。</p><p>SDK提供接口，获取当前包的渠道名。（单接TapDB时可以使用改接口获取渠道）</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">//获取当前包的渠道名（安卓）</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static string GetAdChannelName()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/XDSDK-Doc/android"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Android快速开始 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#导包" class="table-of-contents__link">导包</a><ul><li><a href="#1-修改对应配置文件" class="table-of-contents__link">1 修改对应配置文件</a></li><li><a href="#2-通过-unity-packagemanager-导入" class="table-of-contents__link">2 通过 Unity PackageManager 导入</a></li></ul></li><li><a href="#xdsdk快速集成-登录功能" class="table-of-contents__link">xdsdk快速集成-登录功能</a><ul><li><a href="#1、引入命名空间" class="table-of-contents__link">1、引入命名空间</a></li><li><a href="#2、设置回调" class="table-of-contents__link">2、设置回调</a></li><li><a href="#3、初始化xdsdk" class="table-of-contents__link">3、初始化XDSDK</a></li><li><a href="#4、登录" class="table-of-contents__link">4、登录</a></li><li><a href="#5-注意事项" class="table-of-contents__link">5. 注意事项</a></li><li><a href="#6-android-导出apk" class="table-of-contents__link">6. Android-导出APK</a></li><li><a href="#7-ios-打包xcode" class="table-of-contents__link">7. iOS-打包Xcode</a></li><li><a href="#8-buid-settings" class="table-of-contents__link">8. Buid Settings<highlight color="#f00">*</highlight></a></li></ul></li><li><a href="#登录功能介绍" class="table-of-contents__link">登录功能介绍</a><ul><li><a href="#1登录" class="table-of-contents__link">1.登录</a></li><li><a href="#2设置角色" class="table-of-contents__link">2.设置角色</a></li><li><a href="#3获取access-token" class="table-of-contents__link">3.获取Access Token</a></li><li><a href="#4获取当前登录状态" class="table-of-contents__link">4.获取当前登录状态</a></li><li><a href="#5游客升级" class="table-of-contents__link">5.游客升级</a></li><li><a href="#6游客绑定" class="table-of-contents__link">6.游客绑定</a></li><li><a href="#7登出" class="table-of-contents__link">7.登出</a></li><li><a href="#8退出" class="table-of-contents__link">8.退出</a></li></ul></li><li><a href="#用户相关功能介绍" class="table-of-contents__link">用户相关功能介绍</a><ul><li><a href="#1-打开用户中心" class="table-of-contents__link">1. 打开用户中心</a></li><li><a href="#2-微信分享" class="table-of-contents__link">2. 微信分享</a></li><li><a href="#3实名认证" class="table-of-contents__link">3.实名认证</a></li><li><a href="#4客服" class="table-of-contents__link">4.客服</a></li><li><a href="#5防沉迷" class="table-of-contents__link">5.防沉迷</a></li><li><a href="#6打开协议页面" class="table-of-contents__link">6.打开协议页面</a></li><li><a href="#7taptap论坛" class="table-of-contents__link">7.TapTap论坛</a></li><li><a href="#8xdlive直播" class="table-of-contents__link">8.XDLive直播</a></li><li><a href="#9-地区判断" class="table-of-contents__link">9. 地区判断</a></li></ul></li><li><a href="#内购" class="table-of-contents__link">内购</a><ul><li><a href="#1-流程图" class="table-of-contents__link">1. 流程图</a></li><li><a href="#2-发起支付" class="table-of-contents__link">2. 发起支付</a></li><li><a href="#3-恢复支付" class="table-of-contents__link">3. 恢复支付</a></li><li><a href="#4-恢复订单" class="table-of-contents__link">4. 恢复订单</a></li><li><a href="#5-支付结果" class="table-of-contents__link">5. 支付结果</a></li></ul></li><li><a href="#广告" class="table-of-contents__link">广告</a><ul><li><a href="#1-ios" class="table-of-contents__link">1. iOS</a></li><li><a href="#2-android" class="table-of-contents__link">2. Android</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/XDSDK-Doc/styles.e34e47d4.js"></script>
<script src="/XDSDK-Doc/runtime~main.259922d7.js"></script>
<script src="/XDSDK-Doc/main.8ba90e18.js"></script>
<script src="/XDSDK-Doc/1.8c72245a.js"></script>
<script src="/XDSDK-Doc/2.bac27658.js"></script>
<script src="/XDSDK-Doc/19.db119128.js"></script>
<script src="/XDSDK-Doc/935f2afb.ae79e18c.js"></script>
<script src="/XDSDK-Doc/17896441.91dfea92.js"></script>
<script src="/XDSDK-Doc/df7c724d.5ebb24be.js"></script>
</body>
</html>